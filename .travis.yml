language: rust
dist: trusty
cache:
  apt: true
  cargo: true
  pip: true
  directories:
  - "$TRAVIS_BUILD_DIR/target"
  - "$HOME/Library/Python/2.7"
sudo: required
rust: stable
os:
  - "linux"
  - "osx"
before_install:
- |
  if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
    brew update &&
    brew install openssl &&
    export OPENSSL_INCLUDE_DIR=`brew --prefix openssl`/include &&
    export OPENSSL_LIB_DIR=`brew --prefix openssl`/lib
  fi
before_script:
- |
  pip install 'travis-cargo<0.2' --user &&
  export PATH=$HOME/.local/bin:$HOME/Library/Python/2.7/bin:$HOME/.cargo/bin:$PATH
script:
- |
  travis-cargo build &&
  travis-cargo test
notifications:
  webhooks:
    urls:
      - "https://webhooks.gitter.im/e/717bec1dd1d6de43c44c"
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: never     # options: [always|never|change] default: always
